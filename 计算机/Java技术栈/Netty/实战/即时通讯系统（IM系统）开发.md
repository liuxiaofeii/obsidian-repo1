---

excalidraw-plugin: parsed
tags: [excalidraw]

---
==⚠  Switch to EXCALIDRAW VIEW in the MORE OPTIONS menu of this document. ⚠== You can decompress Drawing data with the command palette: 'Decompress current Excalidraw file'. For more info check in plugin settings under 'Saving'


# Excalidraw Data
## Text Elements
前期：调研、选型、测试、联调 ^TjpDSGa1

整体架构图 ^eMbUhbHZ

一个基本的IM系统的构成 ^x5jQeqt7

用户是消息的发起者 ^20AdGqfw

关系链是指用户与用户之间的关联。
例如，OA系统里用户与用户之间可能是上下级；
电商系统里面用户与用户之间可能是买家和卖家；
在IM系统里面用户与用户之间是好友或者非好友关系、拉黑或者非拉黑关系。 ^DfVm64SH

会话是用户与用户之间产生消息的产物，
在QQ和微信里面也是通过消息而产生会话 ^XP1SbPe2

客户 ^LE1PmDde

客服 ^ypldcG9e

客服端发起长轮询向服务器尝试获取新消息，
如果没有消息则会定时反复执行这个操作 ^jeAt3G0n

缺点：存在很多的空循环 ^A0eab56U

## Embedded Files
2d419ee97e0d446b45b091956294fa0621dac84f: [[Pasted Image 20240529101108_153.png]]
43775388aaef3b91889b7560ab30ecc0fa90fd21: [[Pasted Image 20240529101748_061.png]]
20377c1912254768a3f56b0241ac9fb3c5d02463: [[Pasted Image 20240529102444_002.png]]
35643e0c3c29122e3235be3be94b9820b643136b: [[Pasted Image 20240529103206_071.png]]

%%
## Drawing
```compressed-json
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
```
%%